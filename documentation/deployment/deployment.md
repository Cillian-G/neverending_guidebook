# The Neverending Guidebook
## Deployment

The live deployed application can be found on [Heroku](https://neverending-guidebook.herokuapp.com/).

### Heroku Deployment

This project uses [Heroku](https://www.heroku.com), a platform as a service (PaaS) that enables developers to build, run, and operate applications entirely in the cloud.

Deployment steps are as follows, after account setup:

- Select *New* in the top-right corner of your Heroku Dashboard, and select *Create new app* from the dropdown menu.
- Your app name must be unique, and then choose a region closest to you (EU or USA), and finally, select *Create App*.
- From the new app *Settings*, click *Reveal Config Vars*, and set the following key/value pairs:
  - `CLOUDINARY_URL` (insert your own Cloudinary API key here)
  - `DATABASE_URL` (this comes from the **Resources** tab, you can get your own Postgres Database using the Free Hobby Tier)
  - `SECRET_KEY` (this can be any random secret key)
  - `DISABLE_COLLECTSTATIC` (1)
  - `PORT` (8000)
  - `STRIPE_PUBLIC_KEY` (insert your own Stripe PK API key here)
  - `STRIPE_SECRET_KEY` (insert your own Stripe SK API key here)

Heroku needs two additional files in order to deploy properly.
- requirements.txt
- Procfile

You can install this project's requirements (where applicable) using: `pip3 install -r requirements.txt`. If you have your own packages that have been installed, then the requirements file needs updated using: `pip3 freeze --local > requirements.txt`

The Procfile can be created with the following command: `echo web: gunicorn guidebook.wsgi > Procfile`

For Heroku deployment, follow these steps to connect your GitHub repository to the newly created app:

Either:
- Select "Automatic Deployment" from the Heroku app.

Or:
- In the Terminal/CLI, connect to Heroku using this command: `heroku login -i`
- Set the remote for Heroku: `heroku git:remote -a <app_name>` (replace app_name with your app, without the angle-brackets)
- After performing the standard Git `add`, `commit`, and `push` to GitHub, you can now type: `git push heroku main`

The frontend terminal should now be connected and deployed to Heroku.

#### Stripe API Keys

Instructions for connecting Stripe to the site an be found [here](https://stripe.com/docs/payments/accept-a-payment#web-collect-card-details)

Stripe Keys can be found here on the Dashboard of your stripe account. Simply sign up for a free stripe account, and navigate to the variables pictured below on your own dashboard:
![Stripe Dashboard Image](/documentation/deployment/deployment_images/deployment-stripe1.png)

#### Cloudinary API Key

Cloudinary keys and URLs can be found here on the Dashboard of your Cloudinary account. Simply sign up for a free Cloudianry account, and navigate to the variables pictured below on your own dashboard:
![Cloudinary Dashboard Image](/documentation/deployment/deployment_images/deployment-cloudinary1.png)
### Local Deployment

*Gitpod* IDE was used to write the code for this project.

You can clone the repository by following these steps:

1. Go to the [GitHub repository](https://github.com/Cillian-G/neverending_guidebook) 
2. Locate the Code button above the list of files and click it 
3. Select if you prefer to clone using HTTPS, SSH, or GitHub CLI and click the copy button to copy the URL to your clipboard
4. Open Git Bash or Terminal
5. Change the current working directory to the one where you want the cloned directory
6. In your IDE Terminal, type the following command to clone my repository:
	- `git clone https://github.com/Cillian-G/neverending_guidebook.git`
7. Press Enter to create your local clone.

You can install this project's requirements (where applicable) using: `pip3 install -r requirements.txt`.

You will need to create a new file called `env.py`, and include the same environment variables listed above for Heroku deployment steps.

Alternatively, if using Gitpod, you can click below to create your own workspace using this repository.

[![Open in Gitpod](https://gitpod.io/button/open-in-gitpod.svg)](https://gitpod.io/#https://github.com/Cillian-G/neverending_guidebook)

#### ENV & Config Vars Checklist
Your env.py file, and heroku config vars should contain the following variables: 

        os.environ['DATABASE_URL'] = "Generated by POSTGRES"
        os.environ['SECRET_KEY'] = "Random key, generated onlin or set by user"
        os.environ['CLOUDINARY_URL'] = "Generate by cloudinary"
        os.environ['STRIPE_PUBLIC_KEY'] = "From the Stripe Dashboard"
        os.environ['STRIPE_SECRET_KEY'] = "From the Stripe Dashboard"
        os.environ['EMAIL_HOST_USER'] = "email address of the account you're using"
        os.environ['EMAIL_HOST_PASS'] = "Generated by email client"

#### requirements.txt checklist
There requirements.txt file has been included with this project, however it may be of some use to check your local deployments against this list. The following are the installed packages used in this project.

        asgiref==3.5.2
        cloudinary==1.29.0
        dj-database-url==1.0.0
        dj3-cloudinary-storage==0.0.6
        Django==3.2.15
        django-allauth==0.51.0
        django-crispy-forms==1.14.0
        django-summernote==0.8.20.0
        gunicorn==20.1.0
        oauthlib==3.2.1
        psycopg2==2.9.3
        PyJWT==2.4.0
        python3-openid==3.2.0
        pytz==2022.2.1
        requests-oauthlib==1.3.1
        sqlparse==0.4.2
        stripe==4.1.0
        whitenoise==6.2.0       
      


